make --dry-run --always-make --keep-going --print-directory
make: Entering directory `/home/lxy/develop/OS_Kernel'
echo 编译汇编文件 boot/boot.s ...
nasm -f elf -g -F stabs boot/boot.s
echo 编译汇编文件 krnl/gdt_s.s ...
nasm -f elf -g -F stabs krnl/gdt_s.s
echo 编译汇编文件 krnl/idt_s.s ...
nasm -f elf -g -F stabs krnl/idt_s.s
echo 编译代码文件 init/main.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include init/main.c -o init/main.o
echo 编译代码文件 init/entry.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include init/entry.c -o init/entry.o
echo 编译代码文件 krnl/io.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include krnl/io.c -o krnl/io.o
echo 编译代码文件 krnl/elf.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include krnl/elf.c -o krnl/elf.o
echo 编译代码文件 krnl/debug.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include krnl/debug.c -o krnl/debug.o
echo 编译代码文件 krnl/gdt.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include krnl/gdt.c -o krnl/gdt.o
echo 编译代码文件 krnl/idt.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include krnl/idt.c -o krnl/idt.o
echo 编译代码文件 lib/string.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include lib/string.c -o lib/string.o
echo 编译代码文件 lib/vsprintf.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include lib/vsprintf.c -o lib/vsprintf.o
echo 编译代码文件 lib/list.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include lib/list.c -o lib/list.o
echo 编译代码文件 driver/console.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include driver/console.c -o driver/console.o
echo 编译代码文件 driver/timer.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include driver/timer.c -o driver/timer.o
echo 编译代码文件 mm/pmm.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include mm/pmm.c -o mm/pmm.o
echo 编译代码文件 mm/vmm.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include mm/vmm.c -o mm/vmm.o
echo 编译代码文件 mm/page_fault.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include mm/page_fault.c -o mm/page_fault.o
echo 编译代码文件 mm/kmalloc.c ...
gcc -c -std=gnu99 -Wall -m32 -g3 -ggdb -gstabs+ -nostdinc -fno-pic -fno-builtin -fno-stack-protector -I include mm/kmalloc.c -o mm/kmalloc.o
 
echo 链接内核文件...
ld -T scripts/kernel.ld -m elf_i386 -nostdlib  ./boot/boot.o  ./krnl/gdt_s.o  ./krnl/idt_s.o  ./init/main.o  ./init/entry.o  ./krnl/io.o  ./krnl/elf.o  ./krnl/debug.o  ./krnl/gdt.o  ./krnl/idt.o  ./lib/string.o  ./lib/vsprintf.o  ./lib/list.o  ./driver/console.o  ./driver/timer.o  ./mm/pmm.o  ./mm/vmm.o  ./mm/page_fault.o  ./mm/kmalloc.o -o kernel
sudo mount disk.img /mnt/kernel
sudo cp kernel /mnt/kernel/kernel
sleep 1
sudo umount /mnt/kernel
make: Leaving directory `/home/lxy/develop/OS_Kernel'
 
